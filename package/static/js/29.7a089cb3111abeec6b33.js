(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"Hg/q":function(e,t,r){"use strict";r.d(t,"a",function(){return l}),r.d(t,"b",function(){return a});var l=function(){var r=this,e=r.$createElement,l=r._self._c||e;return l("div",{staticClass:"compomanage-page"},[l("div",{staticClass:"cmpage-header"},[l("el-form",{attrs:{inline:!0,model:r.form}},[l("el-form-item",[l("el-select",{attrs:{placeholder:"全部适用对象",clearable:""},on:{change:r.pickUserType},model:{value:r.form.objTypeNums,callback:function(e){r.$set(r.form,"objTypeNums",e)},expression:"form.objTypeNums"}},[l("el-option",{attrs:{label:"教师",value:"2"}}),r._v(" "),l("el-option",{attrs:{label:"学生",value:"3"}}),r._v(" "),l("el-option",{attrs:{label:"家长",value:"4"}}),r._v(" "),l("el-option",{attrs:{label:"管理人员",value:"5"}}),r._v(" "),l("el-option",{attrs:{label:"公众",value:"6"}})],1)],1),r._v(" "),l("el-form-item",[l("el-input",{attrs:{placeholder:"请输入组件名称搜索",clearable:""},model:{value:r.form.name,callback:function(e){r.$set(r.form,"name",e)},expression:"form.name"}})],1)],1),r._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(e){return r.showDialog()}}},[l("span",[l("i",{staticClass:"g-mr5 el-icon-plus"}),r._v("添 加")])])],1),r._v(" "),l("div",{directives:[{name:"loading",rawName:"v-loading",value:r.loading,expression:"loading"}],staticClass:"cmpage-body"},[l("el-table",{staticClass:"u-table-tit",staticStyle:{width:"100%"},attrs:{data:r.list}},[l("el-table-column",{attrs:{prop:"componentName",label:"组件名称"}}),r._v(" "),l("el-table-column",{attrs:{prop:"objCodeName",label:"适用对象"}}),r._v(" "),l("el-table-column",{attrs:{prop:"componentUrl",label:"组件链接"}}),r._v(" "),l("el-table-column",{attrs:{label:"操作"},scopedSlots:r._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"small"},on:{click:function(e){return r.showDialog(t.row)}}},[r._v("编 辑")]),r._v(" "),l("el-button",{attrs:{size:"small"},on:{click:function(e){return r.confirmDel(t.row)}}},[r._v("删 除")])]}}])})],1),r._v(" "),l("div",{staticClass:"cmpage-pagination"},[l("el-pagination",{attrs:{"current-page":r.form.pageNo,"page-sizes":[100,200,300,400],"page-size":r.form.pageSize,layout:"prev, pager, next, jumper, total",total:r.total},on:{"size-change":r.handleSizeChange,"current-change":r.handleCurrentChange}})],1)],1),r._v(" "),l("el-dialog",{staticClass:"addcomp-dialog",attrs:{title:r.dialogTitle,visible:r.dialogVisible,width:"530px","show-close":!1},on:{"update:visible":function(e){r.dialogVisible=e}}},[l("el-form",{ref:"ruleForm",attrs:{model:r.ruleForm,rules:r.rules,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"组件名称",prop:"name"}},[l("el-input",{model:{value:r.ruleForm.name,callback:function(e){r.$set(r.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),r._v(" "),l("el-form-item",{attrs:{label:"组件链接",prop:"url"}},[l("el-input",{model:{value:r.ruleForm.url,callback:function(e){r.$set(r.ruleForm,"url",e)},expression:"ruleForm.url"}})],1),r._v(" "),l("el-form-item",{attrs:{label:"宽度",prop:"width"}},[l("el-col",{attrs:{span:14}},[l("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":r.querySearch,placeholder:"请选择/输入宽度"},on:{select:r.handleSelect},scopedSlots:r._u([{key:"default",fn:function(e){var t=e.item;return[l("div",{staticClass:"name"},[r._v(r._s(t))])]}}]),model:{value:r.ruleForm.width,callback:function(e){r.$set(r.ruleForm,"width",e)},expression:"ruleForm.width"}},[r._v(" "),l("template",{slot:"append"},[r._v("px")])],2)],1)],1),r._v(" "),l("el-form-item",{attrs:{label:"高度",prop:"height"}},[l("el-col",{attrs:{span:14}},[l("el-input",{attrs:{placeholder:"请输入高度"},model:{value:r.ruleForm.height,callback:function(e){r.$set(r.ruleForm,"height",e)},expression:"ruleForm.height"}},[l("template",{slot:"append"},[r._v("px")])],2)],1)],1),r._v(" "),l("el-form-item",{attrs:{label:"适用对象",prop:"objTypeNums"}},[l("el-checkbox-group",{model:{value:r.ruleForm.objTypeNums,callback:function(e){r.$set(r.ruleForm,"objTypeNums",e)},expression:"ruleForm.objTypeNums"}},[l("el-checkbox",{attrs:{label:"2"}},[r._v("教师")]),r._v(" "),l("el-checkbox",{attrs:{label:"3"}},[r._v("学生")]),r._v(" "),l("el-checkbox",{attrs:{label:"4"}},[r._v("家长")]),r._v(" "),l("el-checkbox",{attrs:{label:"5"}},[r._v("管理人员")]),r._v(" "),l("el-checkbox",{attrs:{label:"6"}},[r._v("公众")])],1)],1)],1),r._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:r.cancel}},[r._v("取 消")]),r._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(e){return r.submitForm("ruleForm")}}},[r._v("确 定")])],1)],1)],1)},a=[]},Jdwh:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,a,i,o=c(r("14Xm")),s=c(r("D3Ub")),n=c(r("eTb6")),u=c(r("ewoT"));function c(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{form:{name:"",objTypeNums:"",pageNo:1,pageSize:10},dialogVisible:!1,list:[],total:0,loading:!1,ruleForm:{id:"",name:"",url:"",width:"",height:"",objTypeNums:[]},dialogTitle:"",rules:{name:[{required:!0,message:"请输入组件名称",trigger:"blur"}],url:[{required:!0,message:"请输入url",trigger:"blur"},{validator:u.default.validateURL,message:"请输入正确URL",trigger:"blur"}],width:[{required:!0,message:"请选择或者输入宽度",trigger:"blur"}],height:[{required:!0,message:"请输入高度",trigger:"blur"}],objTypeNums:[{type:"array",required:!0,message:"请至少选择一个适用对象",trigger:"change"}]}}},watch:{"form.name":function(){this.form.pageNo=1,this.getCpnts()}},methods:{pickUserType:function(){this.form.pageNo=1,this.getCpnts()},handleSizeChange:function(e){this.form.pageSize=e,this.form.pageNo=1,this.getCpnts()},handleCurrentChange:function(e){this.form.pageNo=e,this.getCpnts()},getCpnts:(i=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,n.default.getCpnts(this.form);case 3:t=e.sent,this.loading=!1,t.fail||(this.list=t.data.records,this.total=t.data.total);case 6:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),confirmDel:function(e){var t=this;this.$confirm("确定要删除改组件吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteCpnt(e)}).catch(function(){})},deleteCpnt:(a=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.default.deleteCpnt({ids:t.id});case 2:e.sent.fail||(this.$message({type:"success",message:"删除成功!"}),this.getCpnts());case 4:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)}),querySearch:function(e,t){var r=this.restaurants;t(e?r.filter(this.createFilter(e)):r)},createFilter:function(t){return function(e){return 0===e.indexOf(t)}},loadAll:function(){return["672","328","240"]},handleSelect:function(e){this.ruleForm.width=e},showDialog:function(e){e?(this.dialogTitle="编辑",this.ruleForm.id=e.id,this.ruleForm.name=e.componentName,this.ruleForm.url=e.componentUrl,this.ruleForm.width=""+e.width,this.ruleForm.height=e.height,this.ruleForm.objTypeNums=e.objCodeNums.split(",")):this.dialogTitle="添加",this.dialogVisible=!0},cancel:function(){this.dialogVisible=!1,this.resetForm("ruleForm")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){return!!e&&t.saveCpnt()})},resetForm:function(e){this.ruleForm.id="",this.$refs[e].resetFields()},saveCpnt:(l=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:this.ruleForm.name,url:this.ruleForm.url,width:this.ruleForm.width,height:this.ruleForm.height,objTypeNums:this.ruleForm.objTypeNums.toString()},"编辑"===this.dialogTitle&&(t.id=this.ruleForm.id),e.next=4,n.default.saveCpnt(t);case 4:e.sent.fail||(this.$message({type:"success",message:this.dialogTitle+"成功!"}),this.cancel(),this.form.pageNo=1,this.getCpnts());case 6:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},mounted:function(){this.restaurants=this.loadAll(),this.getCpnts()}}},"PyC+":function(e,t,r){"use strict";r.r(t);var l=r("Jdwh"),a=r.n(l);for(var i in l)"default"!==i&&function(e){r.d(t,e,function(){return l[e]})}(i);var o=r("Hg/q"),s=r("JFUb");function n(e){r("t4cU")}var u=Object(s.a)(a.a,o.a,o.b,!1,n,null,null);t.default=u.exports},t4cU:function(e,t){}}]);