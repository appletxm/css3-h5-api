(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"17bE":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s,i=d(a("P2sY")),o=d(a("14Xm")),r=d(a("D3Ub")),l=d(a("eTb6")),u=a("Q83b"),c=a("+n12");function d(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{form:{name:"",objTypeNums:"",pageNo:1,pageSize:10},UserType:u.UserType,dialogVisible:!1,list:[],total:0,loading:!1}},watch:{"form.name":function(){this.form.pageNo=1,this.getTabs()}},methods:{pickUserType:function(){this.form.pageNo=1,this.getTabs()},handleSizeChange:function(e){this.form.pageSize=e,this.form.pageNo=1,this.getTabs()},handleCurrentChange:function(e){this.form.pageNo=e,this.getTabs()},getTabs:(s=(0,r.default)(o.default.mark(function e(){var t,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,l.default.getTabs(this.form);case 3:t=e.sent,this.loading=!1,t.fail||(a=t.data.records,this.list=(0,c.formTree)(a,"parentId"),this.total=t.data.total);case 6:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)}),go2Add:function(){this.$router.push({name:"home.addpage"})},go2Edit:function(e){this.$router.push({name:"home.addpage",query:{id:e.id}})},confirmDel:function(e){var t=this;this.$confirm("确定要删除该页签吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteTabs(e)}).catch(function(){})},getIds:function(e){var a=[];return function t(e){e.children?(a.push(e.id),e.children.forEach(function(e){t(e)})):a.push(e.id)}(e),a},deleteTabs:(n=(0,r.default)(o.default.mark(function e(t){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.getIds(t),e.next=3,l.default.deleteTabs({ids:a.toString()});case 3:e.sent.fail||(this.$store.dispatch("layout/set",(0,i.default)(this.$store.state.page,{isChange:!0})),this.$message({type:"success",message:"删除成功!"}),this.getTabs());case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},mounted:function(){this.getTabs()},beforeDestroy:function(){this.$store.dispatch("layout/set",(0,i.default)(this.$store.state.page,{isChange:!1}))}}},MaMW:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s});var n=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"compomanage-page"},[n("div",{staticClass:"cmpage-header"},[n("el-form",{attrs:{inline:!0,model:a.form}},[n("el-form-item",[n("el-select",{attrs:{placeholder:"全部适用对象",clearable:""},on:{change:a.pickUserType},model:{value:a.form.objTypeNums,callback:function(e){a.$set(a.form,"objTypeNums",e)},expression:"form.objTypeNums"}},a._l(a.UserType,function(e,t){return n("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1)],1),a._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:a.go2Add}},[n("span",[n("i",{staticClass:"g-mr5 el-icon-plus"}),a._v("添 加")])])],1),a._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"cmpage-body"},[n("el-table",{staticClass:"u-table-tit",staticStyle:{width:"100%"},attrs:{data:a.list,"row-key":"id","default-expand-all":"","tree-props":{children:"children"}}},[n("el-table-column",{attrs:{prop:"tabName",label:"组件名称"}}),a._v(" "),n("el-table-column",{attrs:{prop:"objTypeNums",label:"适用对象"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n          "+a._s(a.UserType[e.row.objTypeNums])+"\n        ")]}}])}),a._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:a._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small"},on:{click:function(e){return a.go2Edit(t.row)}}},[a._v("编 辑")]),a._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(e){return a.confirmDel(t.row)}}},[a._v("删 除")])]}}])})],1),a._v(" "),n("div",{staticClass:"cmpage-pagination"},[n("el-pagination",{attrs:{"current-page":a.form.pageNo,"page-sizes":[100,200,300,400],"page-size":a.form.pageSize,layout:"prev, pager, next, jumper, total",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1)],1)])},s=[]},"UY/I":function(e,t,a){"use strict";a.r(t);var n=a("17bE"),s=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a("MaMW"),r=a("JFUb");function l(e){a("mPae")}var u=Object(r.a)(s.a,o.a,o.b,!1,l,null,null);t.default=u.exports},mPae:function(e,t){}}]);