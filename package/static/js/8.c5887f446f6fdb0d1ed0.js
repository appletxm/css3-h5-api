(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"35pm":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r});var a=function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("div",{staticClass:"layout-template"},[r("grid-layout",{attrs:{layout:a.rows,"col-num":24,"row-height":10,"is-draggable":!0,"is-resizable":!0,"is-mirrored":!1,"vertical-compact":!0,margin:[20,30],"use-css-transforms":!0},on:{"update:layout":function(t){a.rows=t}}},a._l(a.rows,function(e,n){return r("grid-item",{key:e.i,attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i,static:e.static,"drag-ignore-from":".no-drag"},on:{resized:a.resizedEvent}},[r("div",{staticClass:"panel"},[r(e.name,{tag:"component",attrs:{width:e.width,height:e.height,cname:e.cname,url:e.url}}),a._v(" "),e.static?a._e():r("div",{staticClass:"remove no-drag",on:{click:function(t){return a.removeWidget(e.i,n)}}},[r("hf-icon",{attrs:{href:"ui-icon-line-currency-rubbish"}})],1)],1)])}),1)],1)},r=[]},"3w6/":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"addpage-page"},[n("div",{staticClass:"adpp-header"},[n("el-form",{attrs:{inline:!0,model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"适用对象",prop:"objTypeNums"}},[n("el-select",{attrs:{clearable:""},on:{change:e.pickUserType},model:{value:e.form.objTypeNums,callback:function(t){e.$set(e.form,"objTypeNums",t)},expression:"form.objTypeNums"}},e._l(e.UserType,function(t,e){return n("el-option",{key:e,attrs:{label:t,value:e}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"页签名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入页签名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"上级页签"}},[n("el-select",{attrs:{clearable:""},on:{change:e.pickUserType},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}},e._l(e.list,function(t,e){return n("el-option",{key:e,attrs:{label:t.tabName,value:t.id}})}),1)],1),e._v(" "),n("el-form-item",{staticClass:"btns-group"},[n("el-button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{disabled:e.isDisabled},on:{click:e.saveTab}},[e._v("保存")])],1),e._v(" "),n("el-form-item",{attrs:{label:"页签类型",prop:"type"}},[n("el-select",{attrs:{clearable:""},on:{change:e.pickUserType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[n("el-option",{attrs:{label:"链接",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"内容",value:"2"}})],1),e._v(" "),2==e.form.type?n("el-button",{staticClass:"g-ml10",attrs:{type:"primary"},on:{click:function(t){return e.showSelector(!0)}}},[n("span",[n("i",{staticClass:"g-mr5 el-icon-plus"}),e._v("添加组件")])]):e._e()],1),e._v(" "),1==e.form.type?n("el-form-item",{attrs:{label:"页签链接",prop:"linkUrl"}},[n("el-input",{attrs:{placeholder:"请输入页签地址"},model:{value:e.form.linkUrl,callback:function(t){e.$set(e.form,"linkUrl",t)},expression:"form.linkUrl"}})],1):e._e()],1)],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"adpp-body",class:{"g-mt16":2==e.form.type}},[e.disvisibleSelector?n("component-selector"):e._e(),e._v(" "),n("div",{staticClass:"adpp-body-layout"},[n("row-template",{attrs:{rows:e.config}})],1)],1)])},r=[]},"4nuv":function(t,e,n){"use strict";n.r(e);var a=n("JFUb");function r(t){n("tt7j")}var i=Object(a.a)(null,function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"empty-widget"},[n("div",{staticClass:"content"},[t._v("选择组件拖放到这里")])])}],!1,r,null,null);e.default=i.exports},"8W+8":function(t,e,n){"use strict";n.r(e);var a=n("pqn6"),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var s=n("V1OB"),o=n("JFUb");function l(t){n("e/OR")}var u=Object(o.a)(r.a,s.a,s.b,!1,l,null,null);e.default=u.exports},"P+to":function(t,e){},Rdsa:function(t,e){},V1OB:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pure-iframe-widget"},[n("div",{staticClass:"title"},[t._v(t._s(t.cname))]),t._v(" "),t.url?n("iframe",{attrs:{src:t.url,width:t.width,height:t.height,frameborder:"0"}}):t._e()])},r=[]},XEWS:function(t,e,n){"use strict";n.r(e);var a=n("mRWG"),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var s=n("35pm"),o=n("JFUb"),l=Object(o.a)(r.a,s.a,s.b,!1,null,null,null);e.default=l.exports},cruO:function(t,e,n){"use strict";n.r(e);var a=n("zfTj"),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var s=n("3w6/"),o=n("JFUb");function l(t){n("Rdsa")}var u=Object(o.a)(r.a,s.a,s.b,!1,l,null,null);e.default=u.exports},"e/OR":function(t,e){},ftvN:function(t,e,n){"use strict";n.r(e);var a=n("kEwt"),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var s=n("ouSU"),o=n("JFUb");function l(t){n("P+to")}var u=Object(o.a)(r.a,s.a,s.b,!1,l,null,null);e.default=u.exports},kEwt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,r=l(n("14Xm")),i=l(n("D3Ub")),s=l(n("P2sY")),o=l(n("eTb6"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{widgets:[],loading:!1}},computed:{selectedLayoutConfig:function(){return this.$store.state.page.selectedLayoutConfig}},watch:{"$store.state.page.selectedDynamicComponents":function(t){this.widgets.forEach(function(e){e.selected=t.some(function(t){return t===e.id})})}},methods:{handleWidgetSelected:function(t){if(!t.selected){this.loading=!0,this.addWidget(this.selectedLayoutConfig,t);var e=this.$store.state.page.selectedDynamicComponents;e.push(t.id),this.$store.dispatch("page/set",(0,s.default)(this.$store.state.page,{selectedDynamicComponents:e}))}},getComponents:(a=(0,i.default)(r.default.mark(function t(){var e,n,a=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={name:"",objTypeNums:"",pageNo:1,pageSize:99999},t.next=3,o.default.getCpnts(e);case 3:(n=t.sent).fail||(this.widgets=n.data.records.map(function(e){return{id:e.id,name:"PureIframe",cname:e.componentName,width:e.width,height:e.height,url:e.componentUrl,selected:a.$store.state.page.selectedDynamicComponents.some(function(t){return t===e.id})}}));case 5:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)}),addWidget:function(t,e){t.push({x:0,y:0,w:Math.floor(e.width/50),h:Math.floor(e.height/50),i:e.id,name:e.name,cname:e.cname,width:"100%",height:"100%",url:e.url})}},mounted:function(){this.getComponents()}}},mRWG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=u(n("P2sY")),r=u(n("8W+8")),i=u(n("4nuv")),s=u(n("e+jF")),o=u(n("MQ60")),l=u(n("XEWS"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"row-template",props:{rows:{type:Array}},components:{Draggable:o.default,RowTemplate:l.default,PureIframe:r.default,Empty:i.default,GridLayout:s.default.GridLayout,GridItem:s.default.GridItem},computed:{showLayoutSelector:function(){return this.$store.state.layout.showLayoutSelector}},methods:{resizedEvent:function(e,t,n,a,r){var i=this.rows.find(function(t){return t.i===e});i.width=r,i.height=a},removeWidget:function(e,t){var n=this.$store.state.page.selectedDynamicComponents;console.info(n,e),this.$store.dispatch("page/set",(0,a.default)(this.$store.state.page,{selectedDynamicComponents:n.filter(function(t){return t!==e})})),this.rows.splice(t,1)}}}},ouSU:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r});var a=function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"component-selector"},[a("div",{staticClass:"component-selector-header"},[n._v("\n    选择组件\n  ")]),n._v(" "),a("div",{staticClass:"component-selector-body"},[a("ul",{staticClass:"widgets"},n._l(n.widgets,function(e,t){return a("li",{key:t,class:{selected:e.selected},on:{click:function(t){return n.handleWidgetSelected(e)}}},[n._v("\n        "+n._s(e.cname)+"\n        "),e.selected?a("hf-icon",{attrs:{href:"ui-icon-line-currency-tick"}}):n._e()],1)}),0)])])},r=[]},pqn6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{url:{type:String,required:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},cname:String}}},tt7j:function(t,e){},zfTj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,r,i,s=g(n("14Xm")),o=g(n("P2sY")),l=g(n("D3Ub")),u=g(n("gDS+")),c=g(n("eTb6")),d=g(n("e+jF")),f=n("Q83b"),m=g(n("ewoT")),p=g(n("XEWS")),h=g(n("ftvN"));function g(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{form:{id:"",name:"",objTypeNums:"",type:"",parentId:"",linkUrl:"",tabComponents:[]},rules:{objTypeNums:[{required:!0,message:"请选择适用对象",trigger:"change"}],name:[{required:!0,message:"请输入页签名称",trigger:"blur"}],type:[{required:!0,message:"请选择页签类型",trigger:"change"}],linkUrl:[{required:!0,message:"请输入页签地址",trigger:"blur"},{validator:m.default.validateURL,message:"请输入正确URL",trigger:"blur"}]},disvisibleSelector:!1,UserType:f.UserType,dialogVisible:!1,list:[],total:0,loading:!1,dialogTitle:"",config:[]}},components:{ComponentSelector:h.default,GridLayout:d.default.GridLayout,GridItem:d.default.GridItem,RowTemplate:p.default},computed:{isDisabled:function(){return"1"===this.form.type?!(this.form.name&&this.form.objTypeNums&&this.form.linkUrl):!(this.form.name&&this.form.objTypeNums&&this.form.type&&this.form.tabComponents.length)}},watch:{"$store.state.page.selectedLayoutConfig":{handler:function(t){this.config=t,"2"===this.form.type&&(this.form.tabComponents=this.config.map(function(t,e){return{componentId:t.i,sort:e+1}}),this.form.posInfo=(0,u.default)(this.config))},deep:!0}},methods:{pickUserType:function(){this.form.pageNo=1,this.getTabs()},getTabDetail:(i=(0,l.default)(s.default.mark(function t(){var e,n,a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,c.default.getTabDetail({id:this.form.id});case 3:e=t.sent,this.loading=!1,e.fail||(this.form.id=e.data.id,this.form.name=e.data.tabName,this.form.linkUrl=e.data.linkUrl,this.form.objTypeNums=e.data.type,this.form.type=e.data.type,this.form.parentId=e.data.parentId,"2"===e.data.type&&e.data.components&&e.data.components.length&&(n=JSON.parse(e.data.posInfo))&&(a=n.map(function(t){return t.i}),this.$store.dispatch("page/set",(0,o.default)(this.$store.state.page,{selectedDynamicComponents:a,selectedLayoutConfig:n}))));case 6:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)}),cancel:function(){this.$router.go(-1),this.$store.dispatch("page/set",(0,o.default)(this.$store.state.page,{selectedDynamicComponents:[],selectedLayoutConfig:[]}))},handleSelect:function(t){this.ruleForm.width=t},saveTab:(r=(0,l.default)(s.default.mark(function t(){var e;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,c.default.saveTab(this.form);case 3:e=t.sent,this.loading=!1,e.fail||(this.$store.dispatch("layout/set",(0,o.default)(this.$store.state.page,{isChange:!0})),this.$message({type:"success",message:"保存成功"}),this.cancel());case 6:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)}),showSelector:function(t){this.disvisibleSelector=t},getTabs:(a=(0,l.default)(s.default.mark(function t(){var e;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,c.default.getTabs(this.form);case 3:e=t.sent,this.loading=!1,e.fail||(this.list=e.data.records,this.total=e.data.total);case 6:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)})},mounted:function(){var t=this.$route.query.id;t&&(this.form.id=t,this.getTabDetail()),this.getTabs()},beforeDestroy:function(){this.$store.dispatch("layout/set",(0,o.default)(this.$store.state.page,{isChange:!1}))}}}}]);