<!DOCTYPE html>

<html lang="en" style="font-size: 100px;">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <meta name="format-detection" content="telephone=no">
  <title>test css3 and h5 api</title>
  <link rel="icon" href="../assets/images/logo.ico" type="image/png">
  <style>
    canvas {
      border: 1px solid #eee;
    }
  </style>
</head>

<body>
  <img id="test-img" style="display: none;" src="../assets/images/child/1.jpg" />
  <canvas id="test-canvas"></canvas>
  <button id="test-btn">get image data</button>

  <script type="text/javascript">
    var ctx = null
    var width = 0
    var height = 0
    var renderData = null

    document.querySelector('#test-btn').addEventListener('click', function() {
      renderData = ctx.getImageData(0, 0, width, height)
      console.info(renderData.data.length)
    })

    function testUint() {
      const str = `<html>
      <head>
        <title>123456</title>
      </head>
      <body>
        <h1>my test and 中文内容</h1>
        <tabl>
          <tr><td>头部1</td><td>头部2</td><td>头部3</td></tr>
          <tr><td>数据1</td><td>数据2</td><td>数据3</td></tr>
        </table>
      </body>
      </html>`
      let uint = new Uint8Array(30)
      console.info(uint)
      let buffer = new ArrayBuffer(20)
      let uint2 = new Uint8Array(buffer)
      console.info(uint2)
    }

    function drawCtx(img) {
      var canvas = document.querySelector('#test-canvas')
      width = event.target.naturalWidth
      height = event.target.naturalHeight

      // canvas.style.cssText = 'width:' + width + 'px; height:' + height + 'px;'
      canvas.setAttribute('width', width / 2)
      canvas.setAttribute('height', height / 2)

      setTimeout(function() {
        ctx = canvas.getContext('2d')
        ctx.drawImage(img, 0, 0, width, height, 0, 0, width / 2, height / 2)
      }, 0)
    }
   
    function drawImg() {
      let img = document.querySelector('#test-img')
      img.addEventListener('load', (event) => {
        // console.dir(event.currentTarget, event.target)
        drawCtx(event.currentTarget || event.target)
      }, false)
    }

    // drawImg()

  </script>
</body>

</html>
