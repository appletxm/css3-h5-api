<!DOCTYPE html>

<html lang="en" style="font-size: 100px;">

<head>
  <meta charset="UTF-8">
  <!-- <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="expires" content="0"> -->
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <meta name="format-detection" content="telephone=no">
  <title>test clipborad</title>
  <link rel="icon" href="../assets/images/logo.ico" type="image/png">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-size: .12rem;
    }
    .info-panel {
      margin: 10px;
      font-size: .14rem;
      border: 1px solid #eee;
      min-height: 4rem;
      border-radius: 4px;
    }

    .info-panel:focus {
      outline: none;
      border: 1px solid rosybrown;
    }
  </style>
</head>

<body>
  <div class="info-panel" contenteditable="true"></div>
  <input type="text" value="" inputmode="numeric" pattern="\d+\(\.\d{1,2})?" />

  <input id="demoInput" value="hello world">
  <button id="btn">点我复制</button>

  <script>
    var infoPanel = document.querySelector('.info-panel')

    infoPanel.addEventListener('paste', function(event) {
      console.info(event.clipboardData, event.clipboardData.getData('text/plain'))
      var items = event.clipboardData.items || event.clipboardData
      var file = null

      if (items && items.length) {
        for (var i = 0; i < items; i++) {
          if (items[i].type.indexOf('image') !== 1) {
            file = items[i].getAsFile()
            break
          }
        } 
      }
    })

    // text.addEventListener('focusin', function(event){
    //   console.info('focusin:', event)
    // })

    // text.addEventListener('focusout', function(event){
    //   console.info('focusout:', event)
    // })

    window.addEventListener('error', function(err) {
      console.info(err)
      return false
    })

    window.onerror = function() {
      console.info('================')
    }

    const btn = document.querySelector('#btn');
    btn.addEventListener('click',() => {
      const input = document.createElement('input');
      document.body.appendChild(input);

      // input.setAttribute('readonly', 'readonly');
      input.setAttribute('value', 'hello world');
      // input.setSelectionRange(0, 9999);

      if (document.execCommand('copy')) {
        document.execCommand('copy');
        console.log('复制成功');
      }
      document.body.removeChild(input);
    })
  </script>
</body>

</html>
